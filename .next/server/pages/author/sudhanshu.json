{"pageProps":{"cmsData":{"author":{"slug":"sudhanshu","id":"1","name":"Sudhanshu","profile_image":null,"cover_image":null,"bio":null,"website":null,"location":null,"facebook":null,"twitter":null,"meta_title":null,"meta_description":null,"count":{"posts":1},"url":"http://localhost:2368/author/sudhanshu/"},"posts":[{"id":"61003da385a1c51a91941926","uuid":"8da7fd9b-dfea-45d0-a56d-6a293b76e734","title":"Updating package.json","slug":"updating-package-json","html":"<p>I hate when my <code>package.json</code> doesn't show the latest version after I upgrade my repository. I am aware the latest version of these packages can be checked in <code>package-lock.json</code> or <code>yarn.lock</code> but still I hate if they are not present in my <code>package.json</code></p><h2 id=\"so-what-am-i-going-to-do-about-it\">So what am I going to do about it?</h2><p>Well I can delete and reinstall all the <code>dependencies</code> and <code>devDependencies</code>. Its one of the most straightforward solution. So I wrote few lines of code which does exactly the same in <code>bash</code></p><h3 id=\"for-yarn\">For Yarn</h3><pre><code class=\"language-bash\"># clean old or unwanted files\nrm new_package.json\nrm -rf node_modules\nrm -rf yarn.lock\nrm package-lock.json\n\n# clean package.json\ndependencies=$(awk 'BEGIN{flag=0} /dependencies/{flag=1; next} /\\}/{flag=0} flag{print $1}' package.json | cut -f 2 -d '\"')\ndevDependencies=$(awk 'BEGIN{flag=0} /devDependencies/{flag=1; next} /\\}/{flag=0} flag{print $1}' package.json | cut -f 2 -d '\"')\nawk 'BEGIN{flag=1} /dependencies/{print; flag=0} /\\}/{flag=1} flag{print}' package.json | awk 'BEGIN{flag=1} /devDependencies/{print; flag=0} /\\}/{flag=1} flag{print}' | tee new_package.json\ncat new_package.json &gt; package.json\n\n# install dependencies and devDependencies\nyarn add ${dependencies}\nyarn add -D ${devDependencies}\n\n# Fix versions of errant packages which won't work with latest versions\nsed -i 's/\"refractor\": .*\"/\"refractor\": \"\\^3.4.0\"/g' package.json\nsed -i 's/\"unist-util-visit\": \".*\"/\"unist-util-visit\": \"^2.0.3\"/g' package.json\n\n# clean old or unwanted files\nrm new_package.json\nrm -rf node_modules\nrm -rf yarn.lock\nrm package-lock.json\n\n# install in one-shot\nyarn</code></pre><h3 id=\"for-npm\">For NPM</h3><pre><code class=\"language-bash\"># clean old or unwanted files\nrm new_package.json\nrm -rf node_modules\nrm -rf yarn.lock\nrm package-lock.json\n\n# clean package.json\ndependencies=$(awk 'BEGIN{flag=0} /dependencies/{flag=1; next} /\\}/{flag=0} flag{print $1}' package.json | cut -f 2 -d '\"')\ndevDependencies=$(awk 'BEGIN{flag=0} /devDependencies/{flag=1; next} /\\}/{flag=0} flag{print $1}' package.json | cut -f 2 -d '\"')\nawk 'BEGIN{flag=1} /dependencies/{print; flag=0} /\\}/{flag=1} flag{print}' package.json | awk 'BEGIN{flag=1} /devDependencies/{print; flag=0} /\\}/{flag=1} flag{print}' | tee new_package.json\ncat new_package.json &gt; package.json\n\n# install dependencies and devDependencies\nnpm -i ${dependencies}\nnpm -i -D ${devDependencies}\n\n# Fix versions of errant packages which won't work with latest versions\nsed -i 's/\"refractor\": .*\"/\"refractor\": \"\\^3.4.0\"/g' package.json\nsed -i 's/\"unist-util-visit\": \".*\"/\"unist-util-visit\": \"^2.0.3\"/g' package.json\n\n# clean old or unwanted files\nrm new_package.json\nrm -rf node_modules\nrm -rf yarn.lock\nrm package-lock.json\n\n# install in one-shot\nnpm install</code></pre><h2 id=\"future-road-map\">Future Road Map</h2><p>Well current solution is less than ideal and works only in Linux/Unix systems. In future I will try to make it happen for Windows platform as well.</p>","comment_id":"61003da385a1c51a91941926","feature_image":"https://images.unsplash.com/photo-1627396301006-df0f4c1cf221?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxMTc3M3wwfDF8YWxsfDE0fHx8fHx8Mnx8MTYyNzQwNTcwOA&ixlib=rb-1.2.1&q=80&w=2000","featured":false,"visibility":"public","email_recipient_filter":"none","created_at":"2021-07-27T17:08:51.000+00:00","updated_at":"2021-07-27T17:18:45.000+00:00","published_at":"2021-07-27T17:18:45.000+00:00","custom_excerpt":null,"codeinjection_head":null,"codeinjection_foot":null,"custom_template":null,"canonical_url":null,"tags":[{"id":"61003ff585a1c51a9194195e","name":"npm","slug":"npm","description":null,"feature_image":null,"visibility":"public","og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"meta_title":null,"meta_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"http://localhost:2368/tag/npm/"},{"id":"61003ff585a1c51a9194195f","name":"bash","slug":"bash","description":null,"feature_image":null,"visibility":"public","og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"meta_title":null,"meta_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"http://localhost:2368/tag/bash/"},{"id":"61003ff585a1c51a91941960","name":"yarn","slug":"yarn","description":null,"feature_image":null,"visibility":"public","og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"meta_title":null,"meta_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"http://localhost:2368/tag/yarn/"},{"id":"61003ff585a1c51a91941961","name":"upgrading-packages","slug":"upgrading-packages","description":null,"feature_image":null,"visibility":"public","og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"meta_title":null,"meta_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"http://localhost:2368/tag/upgrading-packages/"}],"authors":[{"id":"1","name":"Sudhanshu","slug":"sudhanshu","profile_image":null,"cover_image":null,"bio":null,"website":null,"location":null,"facebook":null,"twitter":null,"meta_title":null,"meta_description":null,"url":"http://localhost:2368/author/sudhanshu/"}],"primary_author":{"id":"1","name":"Sudhanshu","slug":"sudhanshu","profile_image":null,"cover_image":null,"bio":null,"website":null,"location":null,"facebook":null,"twitter":null,"meta_title":null,"meta_description":null,"url":"http://localhost:2368/author/sudhanshu/"},"primary_tag":{"id":"61003ff585a1c51a9194195e","name":"npm","slug":"npm","description":null,"feature_image":null,"visibility":"public","og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"meta_title":null,"meta_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"http://localhost:2368/tag/npm/"},"url":"http://localhost:2368/updating-package-json/","excerpt":"I hate when my package.json doesn't show the latest version after I upgrade my\nrepository. I am aware the latest version of these packages can be checked in \npackage-lock.json or yarn.lock but still I hate if they are not present in my \npackage.json\n\nSo what am I going to do about it?\nWell I can delete and reinstall all the dependencies and devDependencies. Its\none of the most straightforward solution. So I wrote few lines of code which\ndoes exactly the same in bash\n\nFor Yarn\n# clean old or unwa","reading_time":2,"access":true,"send_email_when_published":false,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"meta_title":null,"meta_description":null,"email_subject":null,"frontmatter":null,"featureImage":{"url":"https://images.unsplash.com/photo-1627396301006-df0f4c1cf221?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxMTc3M3wwfDF8YWxsfDE0fHx8fHx8Mnx8MTYyNzQwNTcwOA&ixlib=rb-1.2.1&q=80&w=2000","dimensions":{"width":2000,"height":1336}}}],"settings":{"processEnv":{"siteUrl":"http://localhost:3000","platform":"vercel","darkMode":{"defaultMode":"light","overrideOS":true},"nextImages":{"feature":true,"inline":true,"quality":80,"source":false},"rssFeed":true,"memberSubscriptions":true,"commenting":{"system":null,"commentoUrl":"https://cdn.commento.io","disqusShortname":"short-name-here"},"prism":{"enable":true,"ignoreMissing":true},"contactPage":true,"toc":{"enable":true,"maxDepth":2},"customNavigation":[{"label":"Contact","url":"/contact"}],"isr":{"enable":false,"maxNumberOfPosts":20,"maxNumberOfPages":20}},"title":"Freedom To Be","description":"Thoughts, stories and ideas.","logo":null,"icon":null,"accent_color":"#FF1A75","cover_image":"https://static.ghost.org/v4.0.0/images/publication-cover.jpg","facebook":"ghost","twitter":"@ghost","lang":"en","locale":"en","timezone":"Etc/UTC","codeinjection_head":null,"codeinjection_foot":null,"navigation":[{"label":"Home","url":"/"},{"label":"About","url":"/about/"},{"label":"Collection","url":"/tag/getting-started/"},{"label":"Author","url":"/author/ghost/"},{"label":"Portal","url":"/portal/"},{"label":"Contact","url":"/contact"}],"secondary_navigation":[{"label":"Data & privacy","url":"/privacy/"},{"label":"Contact","url":"/contact/"},{"label":"Contribute â†’","url":"/contribute/"}],"meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"members_support_address":"noreply","url":"http://localhost:2368","coverImage":{"url":"https://static.ghost.org/v4.0.0/images/publication-cover.jpg","dimensions":{"width":7183,"height":2885}}},"seoImage":{"url":"http://localhost:3000/site-meta.png","dimensions":{"width":1120,"height":768}},"bodyClass":"author-template author-sudhanshu"}},"__N_SSG":true}